# Ref: https://securitylab.github.com/research/github-actions-preventing-pwn-requests
name: Breakage

# read-only repo token
# no access to secrets
on:
  pull_request:

jobs:
  break:
    strategy:
      fail-fast: false
      matrix:
        pkgname: 
          - OptimalControlProblems
          - CalculusOfVariations
          - LossControl
          - GeometricPreconditioner
          - MedicalResonanceImaging
          - Kepler
          - PWLdynamics
        pkgversion: 
          - latest
          - stable
        include:
          - pkgbreak: doc
          - pkgbreak: test
            pkgname: OptimalControlProblems
          - pkgpath: control-toolbox
          - pkgpath: agustinyabo
            pkgname: PWLdynamics
    uses: control-toolbox/CTActions/.github/workflows/breakage.yml@main
    with:
      pkgname: ${{ matrix.pkgname }}
      pkgpath: ${{ matrix.pkgpath }}
      pkgversion: ${{ matrix.pkgversion }}
      pkgbreak: ${{ matrix.pkgbreak }}
